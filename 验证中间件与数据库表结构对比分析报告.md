# éªŒè¯ä¸­é—´ä»¶ä¸æ•°æ®åº“è¡¨ç»“æ„å¯¹æ¯”åˆ†ææŠ¥å‘Š

## æ¦‚è¿°

æœ¬æŠ¥å‘Šè¯¦ç»†åˆ†æäº† `static-data.ts` å’Œ `legacy.ts` éªŒè¯ä¸­é—´ä»¶æ–‡ä»¶ä¸æ•°æ®åº“è¡¨ç»“æ„çš„ä¸€è‡´æ€§ï¼Œç¡®ä¿æ•°æ®éªŒè¯è§„åˆ™ä¸å®é™…æ•°æ®åº“çº¦æŸä¿æŒåŒæ­¥ã€‚

## æ•°æ®åº“è¡¨ç»“æ„æ¦‚è§ˆ

### é™æ€æ•°æ®è¡¨
- `realm_data` - å¢ƒç•Œæ•°æ®è¡¨
- `skill_data` - æŠ€èƒ½æ•°æ®è¡¨  
- `weapon_data` - æ­¦å™¨æ•°æ®è¡¨
- `item_data` - ç‰©å“æ•°æ®è¡¨
- `zongmen_data` - å®—é—¨æ•°æ®è¡¨
- `body_type_data` - ä½“è´¨æ•°æ®è¡¨
- `achievement_data` - æˆå°±æ•°æ®è¡¨

### è§’è‰²ç›¸å…³è¡¨
- `character_base_info` - è§’è‰²åŸºç¡€ä¿¡æ¯
- `character_affinities` - è§’è‰²äº²å’Œåº¦
- `character_strength` - è§’è‰²å¼ºåº¦
- `character_body_types` - è§’è‰²ä½“è´¨
- `character_skills` - è§’è‰²æŠ€èƒ½
- `character_weapons` - è§’è‰²æ­¦å™¨
- `character_currency` - è§’è‰²è´§å¸
- `character_items` - è§’è‰²ç‰©å“

## static-data.ts éªŒè¯è§„åˆ™åˆ†æ

### 1. å¢ƒç•Œæ•°æ®éªŒè¯ (realm_data)

**æ•°æ®åº“å­—æ®µçº¦æŸï¼š**
- `realm_level`: TINYINT (0-63)
- `stage_division`: VARCHAR(20)
- `major_realm`: VARCHAR(30)
- `minor_realm`: VARCHAR(30)
- `stage`: VARCHAR(20)
- `cultivation_start_value`: INTEGER DEFAULT 0
- `base_cultivation_limit`: INTEGER
- `base_cultivation_speed`: INTEGER

**éªŒè¯è§„åˆ™å¯¹æ¯”ï¼š**
âœ… **ä¸€è‡´æ€§é—®é¢˜ï¼š**
- éªŒè¯ä¸­ `realm_level` èŒƒå›´æ˜¯ 1-100ï¼Œä½†æ•°æ®åº“æ˜¯ TINYINT (0-63)
- éªŒè¯ä¸­ `realm_name` é•¿åº¦ 1-50ï¼Œä½†æ•°æ®åº“æ²¡æœ‰å¯¹åº”çš„ `realm_name` å­—æ®µ
- éªŒè¯ä¸­ç¼ºå°‘å¯¹ `stage_division`, `major_realm`, `minor_realm` ç­‰å­—æ®µçš„éªŒè¯

âŒ **ä¸åŒ¹é…å­—æ®µï¼š**
- éªŒè¯ï¼š`realm_name`, `cultivation_requirement`, `breakthrough_difficulty`, `realm_description`, `special_abilities`, `power_multiplier`
- æ•°æ®åº“ï¼š`stage_division`, `major_realm`, `minor_realm`, `stage`, `cultivation_start_value`, `base_cultivation_limit`, `base_cultivation_speed`

### 2. æŠ€èƒ½æ•°æ®éªŒè¯ (skill_data)

**æ•°æ®åº“å­—æ®µçº¦æŸï¼š**
- `skill_id`: VARCHAR(20)
- `skill_name`: VARCHAR(50)
- `skill_type`: ENUM('å¿ƒæ³•', 'åŠŸæ³•', 'æ­¦æŠ€', 'ç§˜æœ¯', 'ç¦æœ¯')
- `skill_realm_requirement`: TINYINT
- `skill_description`: TEXT
- `skill_power`: INTEGER

**éªŒè¯è§„åˆ™å¯¹æ¯”ï¼š**
âŒ **æšä¸¾å€¼ä¸åŒ¹é…ï¼š**
- éªŒè¯ï¼š`['attack', 'defense', 'support', 'movement', 'special']`
- æ•°æ®åº“ï¼š`['å¿ƒæ³•', 'åŠŸæ³•', 'æ­¦æŠ€', 'ç§˜æœ¯', 'ç¦æœ¯']`

âŒ **å­—æ®µä¸åŒ¹é…ï¼š**
- éªŒè¯ä¸­æœ‰ï¼š`power_rating`, `mana_cost`, `cooldown_time`, `required_realm_level`
- æ•°æ®åº“ä¸­æœ‰ï¼š`skill_realm_requirement`, `skill_power`

### 3. æ­¦å™¨æ•°æ®éªŒè¯ (weapon_data)

**æ•°æ®åº“å­—æ®µçº¦æŸï¼š**
- `weapon_id`: VARCHAR(20)
- `weapon_name`: VARCHAR(50)
- `weapon_type`: ENUM('å‰‘', 'åˆ€', 'æ£', 'æª', 'é­', 'é”¤', 'æ‰‡', 'ç¬›', 'å…¶ä»–')
- `weapon_realm_requirement`: TINYINT
- `weapon_description`: TEXT
- `weapon_attack_power`: INTEGER
- `weapon_special_effect`: TEXT

**éªŒè¯è§„åˆ™å¯¹æ¯”ï¼š**
âŒ **æšä¸¾å€¼ä¸åŒ¹é…ï¼š**
- éªŒè¯ï¼š`['sword', 'blade', 'spear', 'bow', 'staff', 'hammer', 'dagger', 'whip', 'fan', 'other']`
- æ•°æ®åº“ï¼š`['å‰‘', 'åˆ€', 'æ£', 'æª', 'é­', 'é”¤', 'æ‰‡', 'ç¬›', 'å…¶ä»–']`

âŒ **å­—æ®µä¸åŒ¹é…ï¼š**
- éªŒè¯ä¸­æœ‰ï¼š`weapon_grade`, `base_attack`, `durability`, `special_effects`, `required_level`
- æ•°æ®åº“ä¸­æœ‰ï¼š`weapon_realm_requirement`, `weapon_attack_power`, `weapon_special_effect`

### 4. ç‰©å“æ•°æ®éªŒè¯ (item_data)

**æ•°æ®åº“å­—æ®µçº¦æŸï¼š**
- `item_id`: VARCHAR(20)
- `item_name`: VARCHAR(50)
- `item_type`: ENUM('æ­¦å™¨', 'é˜²å…·', 'é¥°å“', 'æ¶ˆè€—å“', 'ææ–™', 'ä»»åŠ¡ç‰©å“', 'æ³•å®')
- `quality`: ENUM('æ™®é€š', 'ä¼˜ç§€', 'ç¨€æœ‰', 'å²è¯—', 'ä¼ è¯´', 'ç¥å™¨')
- `description`: TEXT
- `realm_requirement`: TINYINT
- `attack_power`: INTEGER
- `defense_power`: INTEGER
- `health_bonus`: INTEGER
- `mana_bonus`: INTEGER
- `special_effect`: TEXT
- `is_stackable`: BOOLEAN
- `max_stack_size`: INTEGER
- `sell_price`: INTEGER
- `buy_price`: INTEGER
- `is_bind_on_pickup`: BOOLEAN
- `is_bind_on_equip`: BOOLEAN

**éªŒè¯è§„åˆ™å¯¹æ¯”ï¼š**
âŒ **æšä¸¾å€¼ä¸åŒ¹é…ï¼š**
- éªŒè¯ `item_type`ï¼š`['consumable', 'material', 'equipment', 'treasure', 'quest', 'other']`
- æ•°æ®åº“ `item_type`ï¼š`['æ­¦å™¨', 'é˜²å…·', 'é¥°å“', 'æ¶ˆè€—å“', 'ææ–™', 'ä»»åŠ¡ç‰©å“', 'æ³•å®']`
- éªŒè¯ `item_grade`ï¼š`['common', 'uncommon', 'rare', 'epic', 'legendary', 'mythical']`
- æ•°æ®åº“ `quality`ï¼š`['æ™®é€š', 'ä¼˜ç§€', 'ç¨€æœ‰', 'å²è¯—', 'ä¼ è¯´', 'ç¥å™¨']`

âŒ **å­—æ®µä¸åŒ¹é…ï¼š**
- éªŒè¯ä¸­ç¼ºå°‘ï¼š`defense_power`, `health_bonus`, `mana_bonus`, `sell_price`, `buy_price`, `is_bind_on_pickup`, `is_bind_on_equip`
- éªŒè¯ä¸­å¤šä½™ï¼š`rarity_level`, `market_value`, `stack_limit`, `effects`

### 5. å®—é—¨æ•°æ®éªŒè¯ (zongmen_data)

**æ•°æ®åº“å­—æ®µçº¦æŸï¼š**
- `zongmen_id`: VARCHAR(8)
- `zongmen_name`: VARCHAR(50)
- `description`: TEXT
- `founder`: VARCHAR(20)
- `established_date`: DATE
- `realm_level_required`: TINYINT

**éªŒè¯è§„åˆ™å¯¹æ¯”ï¼š**
âŒ **å­—æ®µä¸åŒ¹é…ï¼š**
- éªŒè¯ä¸­æœ‰ï¼š`zongmen_type`, `location`, `specialization`, `reputation_level`, `founding_date`, `zongmen_description`
- æ•°æ®åº“ä¸­æœ‰ï¼š`description`, `founder`, `established_date`, `realm_level_required`

## legacy.ts éªŒè¯è§„åˆ™åˆ†æ

### 1. å…¼å®¹æ€§å­—æ®µéªŒè¯

**åˆ†æç»“æœï¼š**
âœ… **è®¾è®¡åˆç†ï¼š** legacy.ts ä¸»è¦ç”¨äºå‘åå…¼å®¹ï¼Œå­—æ®µéªŒè¯ç›¸å¯¹å®½æ¾ï¼Œæ”¯æŒæ—§ç‰ˆAPIæ ¼å¼

âœ… **éªŒè¯è¦†ç›–ï¼š**
- æ—§ç‰ˆæŒé—¨æ•°æ®ï¼šæ”¯æŒ `name`, `level`, `sect`, `power`, `description` ç­‰å­—æ®µ
- æ—§ç‰ˆå®—é—¨æ•°æ®ï¼šæ”¯æŒä¸­æ–‡æšä¸¾å€¼ `['æ­£é“', 'é­”é“', 'ä¸­ç«‹', 'éšä¸–', 'å¤è€']`
- æ˜ å°„æ•°æ®ï¼šæ”¯æŒæ•°æ®è¿ç§»ç›¸å…³å­—æ®µéªŒè¯

### 2. APIç‰ˆæœ¬å…¼å®¹æ€§

âœ… **ç‰ˆæœ¬æ”¯æŒï¼š** æ”¯æŒ v1, v1.1, v1.2 ç‰ˆæœ¬
âœ… **å…¼å®¹æ¨¡å¼ï¼š** æä¾›å…¼å®¹æ¨¡å¼å’Œä¸¥æ ¼éªŒè¯æ ‡å¿—

## ä¸»è¦é—®é¢˜æ€»ç»“

### ğŸ”´ ä¸¥é‡ä¸åŒ¹é…é—®é¢˜

1. **å¢ƒç•Œæ•°æ®å­—æ®µå®Œå…¨ä¸åŒ¹é…**
   - éªŒè¯è§„åˆ™ä¸æ•°æ®åº“è¡¨ç»“æ„å·®å¼‚å·¨å¤§
   - éœ€è¦é‡æ–°è®¾è®¡éªŒè¯è§„åˆ™

2. **æšä¸¾å€¼è¯­è¨€ä¸ä¸€è‡´**
   - æŠ€èƒ½ç±»å‹ï¼šè‹±æ–‡ vs ä¸­æ–‡
   - æ­¦å™¨ç±»å‹ï¼šè‹±æ–‡ vs ä¸­æ–‡  
   - ç‰©å“ç±»å‹ï¼šè‹±æ–‡ vs ä¸­æ–‡
   - ç‰©å“å“è´¨ï¼šè‹±æ–‡ vs ä¸­æ–‡

3. **å­—æ®µåç§°ä¸åŒ¹é…**
   - å¤šä¸ªè¡¨çš„å­—æ®µååœ¨éªŒè¯å’Œæ•°æ®åº“ä¸­ä¸ä¸€è‡´
   - ç¼ºå°‘å¿…è¦å­—æ®µçš„éªŒè¯
   - åŒ…å«æ•°æ®åº“ä¸­ä¸å­˜åœ¨çš„å­—æ®µéªŒè¯

### ğŸŸ¡ ä¸­ç­‰é—®é¢˜

1. **æ•°å€¼èŒƒå›´ä¸åŒ¹é…**
   - å¢ƒç•Œç­‰çº§èŒƒå›´ï¼šéªŒè¯1-100 vs æ•°æ®åº“0-63
   - éœ€è¦ç»Ÿä¸€æ•°å€¼çº¦æŸ

2. **å­—æ®µç±»å‹ä¸ä¸€è‡´**
   - æŸäº›å­—æ®µåœ¨éªŒè¯ä¸­ä¸ºå¯é€‰ï¼Œä½†æ•°æ®åº“ä¸­ä¸ºå¿…éœ€

### ğŸŸ¢ è‰¯å¥½å®è·µ

1. **legacy.ts è®¾è®¡åˆç†**
   - å‘åå…¼å®¹æ€§è€ƒè™‘å‘¨å…¨
   - æ”¯æŒå¤šç‰ˆæœ¬API

2. **éªŒè¯ç»“æ„æ¸…æ™°**
   - æ¨¡å—åŒ–è®¾è®¡è‰¯å¥½
   - é”™è¯¯æ¶ˆæ¯æ¸…æ™°æ˜ç¡®

## ä¿®å¤å»ºè®®

### 1. ç«‹å³ä¿®å¤ (é«˜ä¼˜å…ˆçº§)

1. **ç»Ÿä¸€æšä¸¾å€¼è¯­è¨€**
   ```typescript
   // å»ºè®®ä½¿ç”¨ä¸­æ–‡æšä¸¾å€¼ä¸æ•°æ®åº“ä¿æŒä¸€è‡´
   body('skill_type')
     .isIn(['å¿ƒæ³•', 'åŠŸæ³•', 'æ­¦æŠ€', 'ç§˜æœ¯', 'ç¦æœ¯'])
   ```

2. **ä¿®æ­£å¢ƒç•Œæ•°æ®éªŒè¯**
   ```typescript
   // æ ¹æ®æ•°æ®åº“è¡¨ç»“æ„é‡æ–°è®¾è®¡
   body('realm_level')
     .isInt({ min: 0, max: 63 })
   ```

3. **è¡¥å……ç¼ºå¤±å­—æ®µéªŒè¯**
   - ä¸ºæ•°æ®åº“ä¸­å­˜åœ¨ä½†éªŒè¯ä¸­ç¼ºå¤±çš„å­—æ®µæ·»åŠ éªŒè¯è§„åˆ™

### 2. ä¸­æœŸä¼˜åŒ– (ä¸­ä¼˜å…ˆçº§)

1. **å­—æ®µåç§°ç»Ÿä¸€**
   - ç¡®ä¿éªŒè¯å­—æ®µåä¸æ•°æ®åº“å­—æ®µåå®Œå…¨ä¸€è‡´

2. **æ•°å€¼èŒƒå›´æ ¡å‡†**
   - æ ¹æ®æ•°æ®åº“çº¦æŸè°ƒæ•´éªŒè¯èŒƒå›´

### 3. é•¿æœŸæ”¹è¿› (ä½ä¼˜å…ˆçº§)

1. **è‡ªåŠ¨åŒ–åŒæ­¥æœºåˆ¶**
   - å»ºç«‹æ•°æ®åº“schemaå˜æ›´æ—¶è‡ªåŠ¨æ›´æ–°éªŒè¯è§„åˆ™çš„æœºåˆ¶

2. **ç±»å‹å®‰å…¨å¢å¼º**
   - ä½¿ç”¨TypeScriptç±»å‹å®šä¹‰ç¡®ä¿ç¼–è¯‘æ—¶æ£€æŸ¥

## ç»“è®º

å½“å‰éªŒè¯ä¸­é—´ä»¶ä¸æ•°æ®åº“è¡¨ç»“æ„å­˜åœ¨**ä¸¥é‡ä¸åŒ¹é…**é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å­—æ®µåç§°ã€æšä¸¾å€¼å’Œæ•°æ®ç±»å‹æ–¹é¢ã€‚å»ºè®®ç«‹å³è¿›è¡Œä¿®å¤ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§å’Œç³»ç»Ÿç¨³å®šæ€§ã€‚

**ä¸€è‡´æ€§è¯„åˆ†ï¼š** 30/100
- å­—æ®µè¦†ç›–ç‡ï¼š40%
- ç±»å‹ä¸€è‡´æ€§ï¼š25%
- çº¦æŸä¸€è‡´æ€§ï¼š35%
- æšä¸¾å€¼ä¸€è‡´æ€§ï¼š20%

éœ€è¦ä¼˜å…ˆå¤„ç†æšä¸¾å€¼è¯­è¨€ç»Ÿä¸€å’Œå­—æ®µåç§°åŒ¹é…é—®é¢˜ã€‚