# React-TypeScript Backend åç«¯æ¨¡å—

## ğŸ“ ç›®å½•ç»“æ„

```
backend/
â”œâ”€â”€ controllers/          # æ§åˆ¶å™¨å±‚ - å¤„ç†HTTPè¯·æ±‚å’Œå“åº”
â”‚   â”œâ”€â”€ BaseController.ts     # åŸºç¡€æ§åˆ¶å™¨ç±»
â”‚   â”œâ”€â”€ DatabaseController.ts # æ•°æ®åº“æ“ä½œæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ LeaderController.ts   # æŒé—¨ä¿¡æ¯æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ MappingController.ts  # æ˜ å°„æ•°æ®æ§åˆ¶å™¨
â”‚   â””â”€â”€ ZongmenController.ts  # å®—é—¨ä¿¡æ¯æ§åˆ¶å™¨
â”œâ”€â”€ test-dal/             # DALå±‚æµ‹è¯• - æ•°æ®è®¿é—®å±‚æµ‹è¯•
â”‚   â”œâ”€â”€ baseDAL-manual-test.ts    # åŸºç¡€DALæ‰‹åŠ¨æµ‹è¯•
â”‚   â”œâ”€â”€ characterDALs-test.ts     # è§’è‰²DALæµ‹è¯•
â”‚   â”œâ”€â”€ dal-crud-verification-test.ts # DAL CRUDéªŒè¯æµ‹è¯•
â”‚   â”œâ”€â”€ dalFactory-test.ts        # DALå·¥å‚æµ‹è¯•
â”‚   â”œâ”€â”€ realmDAL-test.ts          # å¢ƒç•ŒDALæµ‹è¯•
â”‚   â”œâ”€â”€ run-baseDAL-test.ts       # åŸºç¡€DALæµ‹è¯•è¿è¡Œå™¨
â”‚   â”œâ”€â”€ run-characterDALs-test.ts # è§’è‰²DALæµ‹è¯•è¿è¡Œå™¨
â”‚   â”œâ”€â”€ run-dalFactory-test.ts    # DALå·¥å‚æµ‹è¯•è¿è¡Œå™¨
â”‚   â””â”€â”€ README.md                 # DALæµ‹è¯•è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ dal/                  # æ•°æ®è®¿é—®å±‚ - æ•°æ®åº“æŠ½è±¡æ¥å£
â”‚   â”œâ”€â”€ implementations/     # DALå®ç°å±‚
â”‚   â”‚   â”œâ”€â”€ BaseDAL.ts          # åŸºç¡€DALç±»
â”‚   â”‚   â”œâ”€â”€ CharacterDALs.ts    # è§’è‰²æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ DALFactory.ts       # DALå·¥å‚ç±»
â”‚   â”‚   â””â”€â”€ DatabaseService.ts  # æ•°æ®åº“æœåŠ¡
â”‚   â””â”€â”€ interfaces/           # DALæ¥å£å®šä¹‰
â”œâ”€â”€ database/             # æ•°æ®åº“å±‚ - æ•°æ®åº“è¿æ¥å’Œé…ç½®
â”‚   â”œâ”€â”€ config/              # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ interfaces/          # æ•°æ®åº“æ¥å£
â”‚   â”œâ”€â”€ scripts/             # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ test/               # æ•°æ®åº“æµ‹è¯•
â”‚   â””â”€â”€ testReport/         # æµ‹è¯•æŠ¥å‘Š
â”œâ”€â”€ middleware/           # ä¸­é—´ä»¶å±‚ - è¯·æ±‚å¤„ç†ä¸­é—´ä»¶
â”‚   â””â”€â”€ validation/          # æ•°æ®éªŒè¯ä¸­é—´ä»¶
â”œâ”€â”€ routes/               # è·¯ç”±å±‚ - APIè·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ index.ts            # è·¯ç”±å…¥å£
â”‚   â””â”€â”€ v2/                 # API v2ç‰ˆæœ¬è·¯ç”±
â”œâ”€â”€ server/               # æœåŠ¡å™¨å±‚ - æœåŠ¡å™¨å¯åŠ¨å’Œé…ç½®
â”‚   â”œâ”€â”€ server.js           # JavaScriptæœåŠ¡å™¨æ–‡ä»¶
â”‚   â””â”€â”€ server.ts           # TypeScriptæœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ services/             # æœåŠ¡å±‚ - ä¸šåŠ¡é€»è¾‘å¤„ç†
â”‚   â”œâ”€â”€ leaderService.ts    # æŒé—¨ä¸šåŠ¡æœåŠ¡
â”‚   â””â”€â”€ peopleDataService.ts # äººå‘˜æ•°æ®æœåŠ¡
â”œâ”€â”€ test_api/             # APIæµ‹è¯• - APIæ¥å£æµ‹è¯•
â”‚   â”œâ”€â”€ api-crud-test.ts    # API CRUDæ“ä½œæµ‹è¯•
â”‚   â”œâ”€â”€ character-crud-test.ts # è§’è‰²CRUDæµ‹è¯•
â”‚   â”œâ”€â”€ run-api-test.ts     # APIæµ‹è¯•è¿è¡Œå™¨
â”‚   â””â”€â”€ simple-api-test.ts  # ç®€å•APIæµ‹è¯•
â”œâ”€â”€ test_controller/      # æ§åˆ¶å™¨æµ‹è¯• - æ§åˆ¶å™¨å±‚æµ‹è¯•
â”‚   â”œâ”€â”€ controller-crud-test.ts # æ§åˆ¶å™¨CRUDæµ‹è¯•
â”‚   â”œâ”€â”€ run-controller-test.ts  # æ§åˆ¶å™¨æµ‹è¯•è¿è¡Œå™¨
â”‚   â”œâ”€â”€ controller-test-report.md # æµ‹è¯•æŠ¥å‘Š
â”‚   â””â”€â”€ README.md           # æµ‹è¯•è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ index.ts              # åç«¯æ¨¡å—å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json          # åç«¯ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScripté…ç½®
â””â”€â”€ README.md             # æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
cd backend
npm install
```

### å¼€å‘æ¨¡å¼å¯åŠ¨
```bash
npm run dev
```

### ç”Ÿäº§æ¨¡å¼å¯åŠ¨
```bash
npm run build
npm start
```

### æ•°æ®åº“æµ‹è¯•
```bash
npm run db:test
```

### æ•°æ®åº“åˆå§‹åŒ–
```bash
npm run db:init
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### å››å±‚æ¶æ„æ¨¡å¼

1. **æ§åˆ¶å™¨å±‚ (Controllers)**
   - å¤„ç†HTTPè¯·æ±‚å’Œå“åº”
   - å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†
   - è°ƒç”¨æœåŠ¡å±‚å¤„ç†ä¸šåŠ¡é€»è¾‘

2. **æœåŠ¡å±‚ (Services)**
   - å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
   - æ•°æ®å¤„ç†å’Œè½¬æ¢
   - è°ƒç”¨æ•°æ®è®¿é—®å±‚

3. **æ•°æ®è®¿é—®å±‚ (DAL)**
   - æä¾›æ•°æ®åº“æ“ä½œçš„æŠ½è±¡æ¥å£
   - å°è£…SQLæŸ¥è¯¢å’Œäº‹åŠ¡å¤„ç†
   - æ•°æ®æ¨¡å‹æ˜ å°„

4. **æ•°æ®åº“å±‚ (Database)**
   - æ•°æ®åº“è¿æ¥ç®¡ç†
   - è¿æ¥æ± é…ç½®
   - æ•°æ®åº“è„šæœ¬å’Œè¿ç§»

## ğŸ“ ä»£ç è§„èŒƒ

### å‘½åè§„èŒƒ
- **æ–‡ä»¶å**: ä½¿ç”¨PascalCaseï¼Œå¦‚ `LeaderController.ts`
- **ç±»å**: ä½¿ç”¨PascalCaseï¼Œå¦‚ `class LeaderController`
- **æ–¹æ³•å**: ä½¿ç”¨camelCaseï¼Œå¦‚ `getLeaderInfo()`
- **å˜é‡å**: ä½¿ç”¨camelCaseï¼Œå¦‚ `leaderData`
- **å¸¸é‡å**: ä½¿ç”¨UPPER_SNAKE_CASEï¼Œå¦‚ `MAX_RETRY_COUNT`

### æ³¨é‡Šè§„èŒƒ
- ä½¿ç”¨JSDocæ ¼å¼æ³¨é‡Š
- æ¯ä¸ªç±»å’Œå…¬å…±æ–¹æ³•éƒ½è¦æœ‰æ³¨é‡Š
- æ³¨é‡Šè¦è¯´æ˜åŠŸèƒ½ã€å‚æ•°ã€è¿”å›å€¼

### ç±»å‹å®‰å…¨
- ä¸¥æ ¼ä½¿ç”¨TypeScriptç±»å‹
- å®šä¹‰æ¥å£å’Œç±»å‹åˆ«å
- é¿å…ä½¿ç”¨anyç±»å‹

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
åœ¨æ ¹ç›®å½•çš„`.env`æ–‡ä»¶ä¸­é…ç½®ï¼š
```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=your_database

# æœåŠ¡å™¨é…ç½®
PORT=3000
NODE_ENV=development
```

### TypeScripté…ç½®
- ç›®æ ‡ç‰ˆæœ¬: ES2020
- æ¨¡å—ç³»ç»Ÿ: ESNext
- ä¸¥æ ¼æ¨¡å¼: å¯ç”¨
- è·¯å¾„æ˜ å°„: æ”¯æŒ@åˆ«å

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡ŒAPIæµ‹è¯•
npm run test:api

# è¿è¡Œæ§åˆ¶å™¨æµ‹è¯•
npm run test:controller

# è¿è¡ŒDALå±‚æµ‹è¯•
npm run test:dal

# è¿è¡Œæ‰€æœ‰åç«¯æµ‹è¯•
npm run test:all
```

### æµ‹è¯•è¦†ç›–ç‡
```bash
npm run test:coverage
```

## ğŸ“š APIæ–‡æ¡£

è¯¦ç»†çš„APIæ–‡æ¡£è¯·å‚è€ƒå„æ§åˆ¶å™¨æ–‡ä»¶ä¸­çš„æ³¨é‡Šï¼Œæˆ–è®¿é—®å¼€å‘æœåŠ¡å™¨çš„APIæ–‡æ¡£é¡µé¢ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼å’Œæ¶æ„æ¨¡å¼
2. æ·»åŠ é€‚å½“çš„å•å…ƒæµ‹è¯•
3. æ›´æ–°ç›¸å…³æ–‡æ¡£
4. æäº¤å‰è¿è¡Œæµ‹è¯•ç¡®ä¿é€šè¿‡

## ğŸ“„ è®¸å¯è¯

MIT License